{"remainingRequest":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/babel-loader/lib/index.js!/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lulutanenbaum/Desktop/your-brain-on-politics/src/components/PopUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/src/components/PopUp.vue","mtime":1587959556350},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgQW5pbWF0ZWRMaW5lQ2hhcnQgZnJvbSAnLi9BbmltYXRlZExpbmVDaGFydCc7CmltcG9ydCBUYWdzIGZyb20gJy4vVGFncyc7CmltcG9ydCB7IHNlbGVjdCwgYmlzZWN0b3IsIGZvcm1hdCB9IGZyb20gJ2QzJzsKdmFyIGJpc2VjdE9mZnNldCA9IGJpc2VjdG9yKGZ1bmN0aW9uIChkKSB7CiAgcmV0dXJuIGQub2Zmc2V0Owp9KS5sZWZ0OwpleHBvcnQgdmFyIGZpbmRDdXJyZW50U2NvcmUgPSBmdW5jdGlvbiBmaW5kQ3VycmVudFNjb3JlKHRpbWUsIGJyYWluRGF0YSkgewogIHZhciBjbG9zZXNJZHggPSBiaXNlY3RPZmZzZXQoYnJhaW5EYXRhLCB0aW1lKTsKICByZXR1cm4gXy5nZXQoYnJhaW5EYXRhW2Nsb3Nlc0lkeF0sICdORVMnKTsKfTsKZXhwb3J0IHZhciBwZXJjZW50YWdlRm9ybWF0dGVyID0gZm9ybWF0KCcrLjInKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQb3BVcCcsCiAgY29tcG9uZW50czogewogICAgQW5pbWF0ZWRMaW5lQ2hhcnQ6IEFuaW1hdGVkTGluZUNoYXJ0LAogICAgVGFnczogVGFncwogIH0sCiAgcHJvcHM6IFsnY29udGVudCcsICdvbkNsb3NlJ10sCiAgY29tcHV0ZWQ6IHsKICAgIGlkOiBmdW5jdGlvbiBpZCgpIHsKICAgICAgcmV0dXJuIF8uZ2V0KF8uaGVhZCh0aGlzLmNvbnRlbnQpLCAnY29udGVudElkJyk7CiAgICB9LAogICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHsKICAgICAgcmV0dXJuIF8uZ2V0KF8uaGVhZCh0aGlzLmNvbnRlbnQpLCAnbmFtZScpOwogICAgfSwKICAgIHZpZGVvTmFtZTogZnVuY3Rpb24gdmlkZW9OYW1lKCkgewogICAgICByZXR1cm4gXy5nZXQoXy5oZWFkKHRoaXMuY29udGVudCksICd2aWRlb05hbWUnKTsKICAgIH0sCiAgICB0YWdzOiBmdW5jdGlvbiB0YWdzKCkgewogICAgICByZXR1cm4gXy5zcGxpdChfLmdldChfLmhlYWQodGhpcy5jb250ZW50KSwgJ3RhZ3MnKSwgJy0nKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVZpZGVvVGltZTogZnVuY3Rpb24gdXBkYXRlVmlkZW9UaW1lKGlkLCBuZXdUaW1lKSB7CiAgICAgIHZhciB2aWRlb0VsZW1lbnQgPSBzZWxlY3QoIltpZD1cIiIuY29uY2F0KGlkLCAiXCJdIikpLm5vZGUoKTsKICAgICAgdmlkZW9FbGVtZW50LnBhdXNlKCk7CiAgICAgIHZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IG5ld1RpbWU7CiAgICB9LAogICAgcmVwb3J0WFNjYWxlOiBmdW5jdGlvbiByZXBvcnRYU2NhbGUoaWQsIGJyYWluRGF0YSwgeFNjYWxlLCBhbmltYXRpb25PdmVybGF5KSB7CiAgICAgIHRoaXMucmVnaXN0ZXJWaWRlb1BsYXliYWNrKGlkLCBicmFpbkRhdGEsIHhTY2FsZSwgYW5pbWF0aW9uT3ZlcmxheSk7CiAgICB9LAogICAgcmVnaXN0ZXJWaWRlb1BsYXliYWNrOiBmdW5jdGlvbiByZWdpc3RlclZpZGVvUGxheWJhY2soaWQsIGJyYWluRGF0YSwgeFNjYWxlLCBhbmltYXRpb25PdmVybGF5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwoKICAgICAgdmlkZW9FbGVtZW50Lm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBhbmltYXRpb25PdmVybGF5LnRyYW5zaXRpb24oKS5kdXJhdGlvbigyNTApLmF0dHIoJ3gnLCB4U2NhbGUodmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lKSk7CiAgICAgICAgdmFyIE5FUyA9IGZpbmRDdXJyZW50U2NvcmUodmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lLCBicmFpbkRhdGEpOwogICAgICAgIHNlbGVjdCgiW2lkPVwiIi5jb25jYXQoX3RoaXMuaWQsICJcIl0gLnRpbWUiKSkuaHRtbCgiIi5jb25jYXQocGVyY2VudGFnZUZvcm1hdHRlcihORVMpLCAiJSIpKTsKICAgICAgfTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["PopUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,CAAA,MAAA,QAAA;AACA,OAAA,iBAAA,MAAA,qBAAA;AACA,OAAA,IAAA,MAAA,QAAA;AACA,SAAA,MAAA,EAAA,QAAA,EAAA,MAAA,QAAA,IAAA;AAEA,IAAA,YAAA,GAAA,QAAA,CAAA,UAAA,CAAA;AAAA,SAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,IAAA;AACA,OAAA,IAAA,gBAAA,GAAA,SAAA,gBAAA,CAAA,IAAA,EAAA,SAAA,EAAA;AACA,MAAA,SAAA,GAAA,YAAA,CAAA,SAAA,EAAA,IAAA,CAAA;AACA,SAAA,CAAA,CAAA,GAAA,CAAA,SAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA;AACA,CAHA;AAIA,OAAA,IAAA,mBAAA,GAAA,MAAA,CAAA,KAAA,CAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,iBAAA,EAAA,iBADA;AAEA,IAAA,IAAA,EAAA;AAFA,GAFA;AAMA,EAAA,KAAA,EAAA,CAAA,SAAA,EAAA,SAAA,CANA;AAOA,EAAA,QAAA,EAAA;AACA,IAAA,EAAA,EAAA,cAAA;AACA,aAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,OAAA,CAAA,EAAA,WAAA,CAAA;AACA,KAHA;AAIA,IAAA,IAAA,EAAA,gBAAA;AACA,aAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,OAAA,CAAA,EAAA,MAAA,CAAA;AACA,KANA;AAOA,IAAA,SAAA,EAAA,qBAAA;AACA,aAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,OAAA,CAAA,EAAA,WAAA,CAAA;AACA,KATA;AAUA,IAAA,IAAA,EAAA,gBAAA;AACA,aAAA,CAAA,CAAA,KAAA,CAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,OAAA,CAAA,EAAA,MAAA,CAAA,EAAA,GAAA,CAAA;AACA;AAZA,GAPA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,EADA,EACA,OADA,EACA;AACA,UAAA,YAAA,GAAA,MAAA,iBAAA,EAAA,SAAA,CAAA,IAAA,EAAA;AACA,MAAA,YAAA,CAAA,KAAA;AACA,MAAA,YAAA,CAAA,WAAA,GAAA,OAAA;AACA,KALA;AAMA,IAAA,YANA,wBAMA,EANA,EAMA,SANA,EAMA,MANA,EAMA,gBANA,EAMA;AACA,WAAA,qBAAA,CAAA,EAAA,EAAA,SAAA,EAAA,MAAA,EAAA,gBAAA;AACA,KARA;AASA,IAAA,qBATA,iCASA,EATA,EASA,SATA,EASA,MATA,EASA,gBATA,EASA;AAAA;;AACA,UAAA,YAAA,GAAA,QAAA,CAAA,cAAA,CAAA,EAAA,CAAA;;AACA,MAAA,YAAA,CAAA,YAAA,GAAA,YAAA;AACA,QAAA,gBAAA,CACA,UADA,GAEA,QAFA,CAEA,GAFA,EAGA,IAHA,CAGA,GAHA,EAGA,MAAA,CAAA,YAAA,CAAA,WAAA,CAHA;AAIA,YAAA,GAAA,GAAA,gBAAA,CAAA,YAAA,CAAA,WAAA,EAAA,SAAA,CAAA;AACA,QAAA,MAAA,iBAAA,KAAA,CAAA,EAAA,eAAA,CAAA,IAAA,WAAA,mBAAA,CAAA,GAAA,CAAA;AACA,OAPA;AAQA;AAnBA;AArBA,CAAA","sourcesContent":["<template>\n  <div id=\"popup\">\n    <button class=\"close\" v-on:click=\"onClose\">X</button>\n    <h2>{{name}}</h2>\n    <div class=\"flex-container\">\n      <div>\n        <video\n          :id=\"id\"\n          controls\n          :src=\"`/videos/${videoName}.mp4`\"\n          type=\"video/mp4\"\n          :poster=\"`thumbnails/${videoName}.png`\"\n        />\n        <Tags v-bind:tags=\"tags\" />\n      </div>\n      <AnimatedLineChart\n        :id=\"id\"\n        v-if=\"content\"\n        :brainData=\"content\"\n        :reportXScale=\"reportXScale\"\n        :updateVideoTime=\"updateVideoTime\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport AnimatedLineChart from './AnimatedLineChart'\nimport Tags from './Tags'\nimport { select, bisector, format } from 'd3'\n\nconst bisectOffset = bisector(d => d.offset).left\nexport const findCurrentScore = (time, brainData) => {\n  const closesIdx = bisectOffset(brainData, time)\n  return _.get(brainData[closesIdx], 'NES')\n}\nexport const percentageFormatter = format('+.2')\n\nexport default {\n  name: 'PopUp',\n  components: {\n    AnimatedLineChart,\n    Tags,\n  },\n  props: ['content', 'onClose'],\n  computed: {\n    id: function() {\n      return _.get(_.head(this.content), 'contentId')\n    },\n    name: function() {\n      return _.get(_.head(this.content), 'name')\n    },\n    videoName: function() {\n      return _.get(_.head(this.content), 'videoName')\n    },\n    tags: function() {\n      return _.split(_.get(_.head(this.content), 'tags'), '-')\n    },\n  },\n  methods: {\n    updateVideoTime(id, newTime) {\n      const videoElement = select(`[id=\"${id}\"]`).node()\n      videoElement.pause()\n      videoElement.currentTime = newTime\n    },\n    reportXScale(id, brainData, xScale, animationOverlay) {\n      this.registerVideoPlayback(id, brainData, xScale, animationOverlay)\n    },\n    registerVideoPlayback(id, brainData, xScale, animationOverlay) {\n      const videoElement = document.getElementById(id)\n      videoElement.ontimeupdate = () => {\n        animationOverlay\n          .transition()\n          .duration(250)\n          .attr('x', xScale(videoElement.currentTime))\n        const NES = findCurrentScore(videoElement.currentTime, brainData)\n        select(`[id=\"${this.id}\"] .time`).html(`${percentageFormatter(NES)}%`)\n      }\n    },\n  },\n}\n</script>\n\n<style>\n@keyframes slideInUp {\n  from {\n    top: 100%;\n  }\n  to {\n    top: 0px;\n  }\n}\n#popup {\n  height: 100vh;\n  background-color: white;\n  /* background: url('../assets/screenshot.png'); */\n  color: #305581;\n  text-align: left;\n  padding-left: 63px;\n  padding-top: 60px;\n  position: fixed;\n  left: 0px;\n  animation: slideInUp 0.5s forwards;\n}\n\n#popup h2 {\n  margin-bottom: 2rem;\n}\n#popup .flex-container {\n  display: flex;\n}\n#popup .flex-container > div {\n  flex: 1;\n}\n#popup video {\n  width: 92%;\n  height: auto;\n  margin-bottom: 2.5rem;\n}\n#popup #tags span {\n  padding: 0.2rem 0.5rem;\n  border-radius: 1rem;\n  border: #305581 solid 1px;\n  margin: 0.25rem;\n}\n</style>\n"],"sourceRoot":"src/components"}]}