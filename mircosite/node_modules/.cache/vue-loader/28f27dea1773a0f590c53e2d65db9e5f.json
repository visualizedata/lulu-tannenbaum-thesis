{"remainingRequest":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lulutanenbaum/Desktop/your-brain-on-politics/src/components/AnimatedLineChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/src/components/AnimatedLineChart.vue","mtime":1588111977997},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lulutanenbaum/Desktop/your-brain-on-politics/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgc2VsZWN0LAogIHNjYWxlTGluZWFyLAogIGxpbmUsCiAgYXhpc0JvdHRvbSwKICBheGlzTGVmdCwKICBmb3JtYXQsCiAgZXh0ZW50LAogIHRpbWVGb3JtYXQsCiAgZXZlbnQsCn0gZnJvbSAnZDMnCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2JyYWluRGF0YScsICdyZXBvcnRYU2NhbGUnLCAndXBkYXRlVmlkZW9UaW1lJywgJ2lkJ10sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucmVuZGVyQ2hhcnQodGhpcy5icmFpbkRhdGEpCiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybWF0dGVkUGVyY2VudGFnZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmIChfLmlzTmlsKHRoaXMuc2VsZWN0ZWRJc3N1ZSkpIHsKICAgICAgICByZXR1cm4gJycKICAgICAgfQogICAgICBjb25zdCBpc3N1ZU9iaiA9IF8uZmluZCh0aGlzLmlzc3VlcywgaSA9PiBpLmlzc3VlID09PSB0aGlzLnNlbGVjdGVkSXNzdWUpCiAgICAgIHJldHVybiBmb3JtYXQoJy4wJScpKGlzc3VlT2JqLnBlcmNlbnRhZ2UpCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcmVuZGVyQ2hhcnQoYnJhaW5EYXRhKSB7CiAgICAgIHNlbGVjdChgW2lkPSIke3RoaXMuaWR9Il0ubGluZWNoYXJ0LXN2Zy1jb250YWluZXIgc3ZnYCkKICAgICAgICAuc2VsZWN0QWxsKCcqJykKICAgICAgICAucmVtb3ZlKCkKICAgICAgY29uc3QgY29udGFpbmVyID0gc2VsZWN0KAogICAgICAgIGBbaWQ9IiR7dGhpcy5pZH0iXS5saW5lY2hhcnQtc3ZnLWNvbnRhaW5lcmAKICAgICAgKS5ub2RlKCkKICAgICAgY29uc3QgbWFyZ2luID0gMzAKICAgICAgY29uc3Qgc3ZnV2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGgKCiAgICAgIGNvbnN0IHN2Z0hlaWdodCA9IHN2Z1dpZHRoICogMC42CiAgICAgIGNvbnN0IGNoYXJ0V2lkdGggPSBzdmdXaWR0aCAtIDIgKiBtYXJnaW4KICAgICAgY29uc3QgY2hhcnRIZWlnaHQgPSBzdmdIZWlnaHQgLSAyICogbWFyZ2luCgogICAgICBjb25zdCBzdmcgPSBzZWxlY3QoYFtpZD0iJHt0aGlzLmlkfSJdIHN2Z2ApCiAgICAgICAgLmF0dHIoJ3dpZHRoJywgc3ZnV2lkdGgpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHN2Z0hlaWdodCkKCiAgICAgIGNvbnN0IGNoYXJ0ID0gc3ZnCiAgICAgICAgLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW59LCR7bWFyZ2lufSlgKQoKICAgICAgY29uc3QgeVNjYWxlID0gc2NhbGVMaW5lYXIoKQogICAgICAgIC5yYW5nZShbY2hhcnRIZWlnaHQsIDBdKQogICAgICAgIC5kb21haW4oWy02MCwgOTBdKQogICAgICAvLyAuZG9tYWluKFsKICAgICAgLy8gICBfLm1pbkJ5KHRoaXMuY29udGVudCwgJ05FUycpWydORVMnXSwKICAgICAgLy8gICBfLm1heEJ5KHRoaXMuY29udGVudCwgJ05FUycpWydORVMnXSwKICAgICAgLy8gXSkKCiAgICAgIGNoYXJ0LmFwcGVuZCgnZycpLmNhbGwoYXhpc0xlZnQoeVNjYWxlKS50aWNrcygwKSkKCiAgICAgIGNvbnN0IHhTY2FsZSA9IHNjYWxlTGluZWFyKCkKICAgICAgICAucmFuZ2UoWzAsIGNoYXJ0V2lkdGhdKQogICAgICAgIC5kb21haW4oZXh0ZW50KGJyYWluRGF0YS5tYXAoZCA9PiBkLm9mZnNldCkpKQoKICAgICAgY2hhcnQKICAgICAgICAuYXBwZW5kKCdnJykKICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCAke2NoYXJ0SGVpZ2h0fSlgKQogICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzJykKICAgICAgICAuY2FsbCgKICAgICAgICAgIGF4aXNCb3R0b20oeFNjYWxlKS50aWNrRm9ybWF0KGQgPT4KICAgICAgICAgICAgdGltZUZvcm1hdCgnJU06JVMnKShuZXcgRGF0ZSgwKS5zZXRTZWNvbmRzKGQpKQogICAgICAgICAgKQogICAgICAgICkKICAgICAgICAuc2VsZWN0QWxsKCd0ZXh0JykKICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSgtNDUpJykKICAgICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ2VuZCcpCgogICAgICBjaGFydAogICAgICAgIC5hcHBlbmQoJ2cnKQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsIDApYCkKICAgICAgICAuYXR0cignY2xhc3MnLCAnYXhpcycpCiAgICAgICAgLmNhbGwoCiAgICAgICAgICBheGlzTGVmdCh5U2NhbGUpCiAgICAgICAgICAgIC50aWNrVmFsdWVzKFstNjAsIC0zMCwgMCwgMzAsIDYwLCA5MF0pCiAgICAgICAgICAgIC50aWNrRm9ybWF0KGQgPT4gYCR7ZH0lYCkKICAgICAgICApCgogICAgICBjaGFydAogICAgICAgIC5hcHBlbmQoJ3BhdGgnKQogICAgICAgIC5kYXR1bShicmFpbkRhdGEpCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUnKQogICAgICAgIC5hdHRyKAogICAgICAgICAgJ2QnLAogICAgICAgICAgbGluZSgpCiAgICAgICAgICAgIC54KGQgPT4geFNjYWxlKGQub2Zmc2V0KSkKICAgICAgICAgICAgLnkoZCA9PiB5U2NhbGUoZC5ORVMpKQogICAgICAgICkKCiAgICAgIGNvbnN0IHByb2dyZXNzT3ZlcmxheSA9IGNoYXJ0CiAgICAgICAgLmFwcGVuZCgncmVjdCcpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMSwgMCknKQogICAgICAgIC5hdHRyKCd3aWR0aCcsIGNoYXJ0V2lkdGgpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGNoYXJ0SGVpZ2h0KQogICAgICAgIC5hdHRyKCdmaWxsJywgJ3doaXRlJykKCiAgICAgIC8vIGJlbmNobWFyawogICAgICBjaGFydAogICAgICAgIC5hcHBlbmQoJ3BhdGgnKQogICAgICAgIC5kYXR1bShicmFpbkRhdGEpCiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JlbmNobWFyay1saW5lJykKICAgICAgICAuYXR0cigKICAgICAgICAgICdkJywKICAgICAgICAgIGxpbmUoKQogICAgICAgICAgICAueChkID0+IHhTY2FsZShkLm9mZnNldCkpCiAgICAgICAgICAgIC55KHlTY2FsZSgwKSkKICAgICAgICApCgogICAgICBzdmcub24oJ2NsaWNrJywgKCkgPT4gewogICAgICAgIGNvbnN0IHhPZmZzZXQgPSBldmVudC5vZmZzZXRYIC0gbWFyZ2luCiAgICAgICAgY29uc3QgbmV3VGltZSA9IHhTY2FsZS5pbnZlcnQoeE9mZnNldCkKICAgICAgICB0aGlzLnVwZGF0ZVZpZGVvVGltZSh0aGlzLmlkLCBuZXdUaW1lKQogICAgICB9KQoKICAgICAgY29uc3QgZmlyc3QgPSBfLmhlYWQoYnJhaW5EYXRhKQogICAgICBjb25zdCBwRm9ybWF0ID0gZm9ybWF0KCcrLjAlJykKICAgICAgc2VsZWN0KGNvbnRhaW5lcikKICAgICAgICAuc2VsZWN0KCcuYXZnJykKICAgICAgICAuaHRtbChwRm9ybWF0KF8uZ2V0KGZpcnN0LCAnYXZlcmFnZScpKSkKICAgICAgc2VsZWN0KGNvbnRhaW5lcikKICAgICAgICAuc2VsZWN0KCcubWF4JykKICAgICAgICAuaHRtbChwRm9ybWF0KF8uZ2V0KGZpcnN0LCAnbWF4JykpKQoKICAgICAgdGhpcy5yZXBvcnRYU2NhbGUodGhpcy5pZCwgYnJhaW5EYXRhLCB4U2NhbGUsIHByb2dyZXNzT3ZlcmxheSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["AnimatedLineChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AnimatedLineChart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div :id=\"id\" class=\"linechart-svg-container\">\n    <svg />\n    <span class=\"legend\">Benchmark</span>\n    <span class=\"legend\">Neural Engagement</span>\n    <h5>Top Neural Engagement Scores</h5>\n    <p>\n      Current Second\n      <span class=\"time metadata\">0%</span>\n    </p>\n    <p>\n      Average Engagement\n      <span class=\"avg metadata\">+17%</span>Max Engagement\n      <span class=\"max metadata\">+54%</span>\n    </p>\n  </div>\n</template>\n\n<script>\nimport {\n  select,\n  scaleLinear,\n  line,\n  axisBottom,\n  axisLeft,\n  format,\n  extent,\n  timeFormat,\n  event,\n} from 'd3'\nimport _ from 'lodash'\nexport default {\n  props: ['brainData', 'reportXScale', 'updateVideoTime', 'id'],\n  mounted() {\n    this.renderChart(this.brainData)\n  },\n  computed: {\n    formattedPercentage: function() {\n      if (_.isNil(this.selectedIssue)) {\n        return ''\n      }\n      const issueObj = _.find(this.issues, i => i.issue === this.selectedIssue)\n      return format('.0%')(issueObj.percentage)\n    },\n  },\n  methods: {\n    renderChart(brainData) {\n      select(`[id=\"${this.id}\"].linechart-svg-container svg`)\n        .selectAll('*')\n        .remove()\n      const container = select(\n        `[id=\"${this.id}\"].linechart-svg-container`\n      ).node()\n      const margin = 30\n      const svgWidth = container.clientWidth\n\n      const svgHeight = svgWidth * 0.6\n      const chartWidth = svgWidth - 2 * margin\n      const chartHeight = svgHeight - 2 * margin\n\n      const svg = select(`[id=\"${this.id}\"] svg`)\n        .attr('width', svgWidth)\n        .attr('height', svgHeight)\n\n      const chart = svg\n        .append('g')\n        .attr('transform', `translate(${margin},${margin})`)\n\n      const yScale = scaleLinear()\n        .range([chartHeight, 0])\n        .domain([-60, 90])\n      // .domain([\n      //   _.minBy(this.content, 'NES')['NES'],\n      //   _.maxBy(this.content, 'NES')['NES'],\n      // ])\n\n      chart.append('g').call(axisLeft(yScale).ticks(0))\n\n      const xScale = scaleLinear()\n        .range([0, chartWidth])\n        .domain(extent(brainData.map(d => d.offset)))\n\n      chart\n        .append('g')\n        .attr('transform', `translate(0, ${chartHeight})`)\n        .attr('class', 'axis')\n        .call(\n          axisBottom(xScale).tickFormat(d =>\n            timeFormat('%M:%S')(new Date(0).setSeconds(d))\n          )\n        )\n        .selectAll('text')\n        .attr('transform', 'rotate(-45)')\n        .style('text-anchor', 'end')\n\n      chart\n        .append('g')\n        .attr('transform', `translate(0, 0)`)\n        .attr('class', 'axis')\n        .call(\n          axisLeft(yScale)\n            .tickValues([-60, -30, 0, 30, 60, 90])\n            .tickFormat(d => `${d}%`)\n        )\n\n      chart\n        .append('path')\n        .datum(brainData)\n        .attr('class', 'line')\n        .attr(\n          'd',\n          line()\n            .x(d => xScale(d.offset))\n            .y(d => yScale(d.NES))\n        )\n\n      const progressOverlay = chart\n        .append('rect')\n        .attr('transform', 'translate(1, 0)')\n        .attr('width', chartWidth)\n        .attr('height', chartHeight)\n        .attr('fill', 'white')\n\n      // benchmark\n      chart\n        .append('path')\n        .datum(brainData)\n        .attr('class', 'benchmark-line')\n        .attr(\n          'd',\n          line()\n            .x(d => xScale(d.offset))\n            .y(yScale(0))\n        )\n\n      svg.on('click', () => {\n        const xOffset = event.offsetX - margin\n        const newTime = xScale.invert(xOffset)\n        this.updateVideoTime(this.id, newTime)\n      })\n\n      const first = _.head(brainData)\n      const pFormat = format('+.0%')\n      select(container)\n        .select('.avg')\n        .html(pFormat(_.get(first, 'average')))\n      select(container)\n        .select('.max')\n        .html(pFormat(_.get(first, 'max')))\n\n      this.reportXScale(this.id, brainData, xScale, progressOverlay)\n    },\n  },\n}\n</script>\n<style>\n\n.linechart-svg-container h5 {\n  margin-top: 50px;\n}\n.linechart-svg-container span.metadata {\n  color: #a44b6d;\n  font-size: 1.2rem;\n  font-weight: 600;\n  margin: 0px 1.5rem;\n}\n\n.linechart-svg-container .axis path {\n  stroke: #e8ebef;\n}\n\n.linechart-svg-container .axis .tick line {\n  stroke: #e8ebef;\n}\n.linechart-svg-container .axis text {\n  font-size: 0.5rem;\n  fill: #5d697b;\n  stroke: none;\n}\n\npath.benchmark-line {\n  stroke: #3a3737;\n  stroke-dasharray: 3 1;\n  stroke-width: 0.75;\n  fill: none;\n}\n\n.linechart-svg-container .line {\n  stroke: #a44b6d;\n  fill: none;\n  stroke-width: 3;\n}\n\n.linechart-svg-container span.legend {\n  position: relative;\n  margin-left: 75px;\n  font-size: 0.5rem;\n  color: #5d697b;\n}\n.linechart-svg-container span.legend:nth-of-type(1) {\n  margin-left: 200px;\n}\n\n.linechart-svg-container span.legend:before {\n  content: '';\n  position: absolute;\n  bottom: 5px;\n  left: -50px;\n  width: 40px;\n}\n.linechart-svg-container span.legend:nth-of-type(1):before {\n  border-bottom: 1px dashed #3a3737;\n}\n.linechart-svg-container span.legend:nth-of-type(2):before {\n  border-bottom: 2px solid #a44b6d;\n}\n\n</style>\n"]}]}